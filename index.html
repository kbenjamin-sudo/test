<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyOS</title>
    <script>
        let authReady = false;

        // Auth initialization fix
        function initAuth() {
            // Logic to initialize authentication
            authReady = true; // Example of changing the flag
        }

        window.addEventListener('beforeunload', (event) => {
            // Handle tab close or refresh
            if (!authReady) {
                event.preventDefault();
                event.returnValue = ''; // Standard message
            }
        });

        function saveNote() {
            if (authReady) {
                // Logic to save note
            } else {
                alert('Cannot save note until authentication is ready.');
            }
        }

        window.onload = initAuth;
    </script>
</head>
<body>
    <h1>Welcome to StudyOS</h1>
    <button onclick="saveNote()">Save Note</button>
</body>
</html>